<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>J.A.T.E</title>
    <meta name="theme-color" content="#2fa322">
    <link rel="manifest" href="./manifest.json">

    <!-- Inline critical CSS for above-the-fold content -->
    <style>
        /* Critical CSS styles go here */
        #navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #2fa322;
            padding: 10px;
        }

        .nav-btn {
            display: flex;
            align-items: center;
        }

        .navbar-brand img {
            width: 50px;
            height: 50px;
        }

        .loading-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .loading-spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body>
    <nav id="navbar">
        <div class="nav-btn">
            <a class="btn btn-sm btn-dark" id="buttonInstall" role="button">Install!</a>
        </div>
        <h1>Just Another Text Editor</h1>
        <div class="navbar-brand">
            <img src="./assets/icons/icon_96x96.png" alt="Logo">
        </div>
    </nav>
    <main id="main">
        <div class="loading-container">
            <div class="loading-spinner"></div>
        </div>
    </main>

    <!-- Async loading of non-render-blocking scripts -->
    <script>
        function loadScript(src, async = true) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.async = async;
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }

        async function loadScripts() {
            await loadScript('https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/codemirror.min.js');
            await loadScript('https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/mode/javascript/javascript.min.js');
            await loadScript('main.bundle.js', true);
            await loadScript('install.bundle.js', true);
        }

        loadScripts().then(() => {
            console.log('All scripts loaded successfully');
        }).catch((error) => {
            console.error('Error loading scripts:', error);
        });
    </script>
</body>

</html>
